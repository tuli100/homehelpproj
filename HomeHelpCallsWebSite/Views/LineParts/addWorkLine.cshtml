
@model HomeHelpCallsWebSite.Models.LineViewModel


@using (Html.BeginForm()) // "Create", "LineParts", new AjaxOptions { HttpMethod = "POST"}))
{
    @Html.AntiForgeryToken()

    <td>
        <div class="form-group">
            <div class="ui-widget">
                <div>
                    @Html.DropDownListFor(model => model.part_code, Model.WParts, htmlAttributes: new { @class = "btn btn-default btn-lg dropdown-toggle" })
                    @Html.ValidationMessageFor(model => model.part_code_name, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
    </td>
    <div class="form-group col-md-3">
        <td>
            <div class="form-group">
                @Html.LabelFor(model => model.qnty, "", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @*@Html.EditorFor(model => model.qnty, new { htmlAttributes = new { @class = "form-control" } })*@
                    @Html.DropDownListFor(model => model.qnty, new SelectList(
                       new List<Object>{
                            new { value = 0.25 , text = "0:15"  },
                            new { value = 0.5 , text = "0:30"  },
                            new { value = 0.75 , text = "0:45"},
                            new { value = 1.0 , text = "1:00" },
                            new { value = 1.5 , text = "1:30"},
                            new { value = 2.0 , text = "2:00"  },
                            new { value = 2.5 , text = "2:30" },
                            new { value = 3.0 , text = "3:00"},
                            new { value = 3.5 , text = "3:30"  },
                            new { value = 4.0 , text = "4:00" },
                            new { value = 4.5 , text = "4:30" },
                            new { value = 5.0 , text = "5:00" },
                            new { value = 5.5 , text = "5:30" },
                            new { value = 6.0 , text = "6:00" },
                            new { value = 6.5 , text = "6:30" },
                            new { value = 7.0 , text = "7:00" },
                            new { value = 7.5 , text = "7:30" },
                            new { value = 8.0 , text = "8:00" },
                            new { value = 8.5 , text = "8:30" },
                            new { value = 9.0 , text = "9:00" },
                              },
                            "value",
                            "text",
                             2), htmlAttributes: new { @class = "btn btn-default btn-lg dropdown-toggle" })
                    @Html.ValidationMessageFor(model => model.qnty, "", new { @class = "text-danger" })
                </div>
            </div>
        </td>
    </div>
    <td>
        <div class="form-group">
            <div>
                @Html.EditorFor(model => model.txt_dscr, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.txt_dscr, "", new { @class = "text-danger" })
            </div>
        </div>
    </td>

    <td>
        <div>
            @Html.HiddenFor(Model => Model.doc_nbr)
            @Html.HiddenFor(Model => Model.parent_strm_code)
            @Html.HiddenFor(Model => Model.part_code)
        </div>
    </td>

}
<td>
    <div class="btn-group">
        <button class="btn btn-default button-remove" type="button" data-toggle="tooltip" title="מחק את השורה." id="button-remove">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
        <button class="btn btn-default button-clone" type="button" data-toggle="tooltip" title="שכפל את השורה." id="button-clone">
            <span class="glyphicon glyphicon-save"></span>
        </button>
    </div>
    @*@Html.ActionLink(" ", "Delete", new { id = model.LINE_ID }, new { @onclick = "return confirm('האם אתה בטוח שברצונך למחוק פריט " + model.part_code_name + " ?');", @class = "glyphicon glyphicon-remove", @style = "color:red" })*@
    @*<a class="btn btn-default btn-lg" href="@Url.Action("Edit", "LineParts", new { id = model.LINE_ID })" title="עריכה"><span class=" glyphicon glyphicon-pencil"></span> עריכה </a>*@
</td>

<script type="text/javascript">
    var doc = document.getElementById("doc_nbr").value;
    var line = document.getElementById("line_nbr").value;
    var id = "#autocomplete" + line;
    $(id).autocomplete({
        delay: 500,
        minLength: 3,
        source: function (request, response) {
            $.ajax({
                url: "/LineParts/FindPartJson",
                dataType: "json",
                data: {
                    'id': doc,
                    'term': request.term
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item,
                            value: item
                        }
                    }))
                }
            })
        },
    });
</script>

<script type="text/javascript">
    var doc = document.getElementById("doc_nbr").value;
    $("#autocomplete").autocomplete({
        delay: 500,
        minLength: 3,
        source: function (request, response) {
            $.ajax({
                url: "/LineParts/FindPartJson",
                dataType: "json",
                data: {
                    'id': doc,
                    'term': request.term
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item,
                            value: item
                        }
                    }))
                }
            })
        },
    });
</script>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
